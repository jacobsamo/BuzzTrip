import { Resend } from "@convex-dev/resend";
import z from "zod";
import { components } from "./_generated/api";
import { zodInternalMutation } from "./helpers";

export const resend: Resend = new Resend(components.resend, {
  testMode: false,
});

export const sendWelcomeEmail = zodInternalMutation({
  args: {
    firstName: z.string().optional(),
    email: z.string(),
  },
  handler: async (ctx, { firstName, email }) => {
    await resend.sendEmail(ctx, {
      from: "Jacob Samorowski <info@buzztrip.co>",
      to: firstName ? `${firstName} <${email}>` : email,
      subject: "Welcome to BuzzTrip",
      replyTo: ["jacob.samorowski@buzztrip.co"],
      html: `<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html dir="ltr" lang="en"><head><link rel="preload" as="image" href="https://di867tnz6fwga.cloudfront.net/brand-kits/5c37fc6e-f7cf-42bd-9edb-2b116f9c8cd8/primary/e79aab6e-3705-411e-8375-afbf42103906.png"/><link rel="preload" as="image" href="https://new.email/static/emails/social/social-x.png"/><link rel="preload" as="image" href="https://new.email/static/emails/social/social-bluesky.png"/><link rel="preload" as="image" href="https://new.email/static/emails/social/social-instagram.png"/><link rel="preload" as="image" href="https://new.email/static/emails/social/social-linkedin.png"/><link rel="preload" as="image" href="https://new.email/static/emails/social/social-github.png"/><meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/><meta name="x-apple-disable-message-reformatting"/></head><body style="background-color:rgb(245,243,229);font-family:ui-sans-serif, system-ui, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;;padding-top:40px;padding-bottom:40px"><!--$--><div style="display:none;overflow:hidden;line-height:1px;opacity:0;max-height:0;max-width:0">Welcome to BuzzTrip! Let&#x27;s start creating amazing custom maps together 🗺️<div> ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿ ‌​‍‎‏﻿</div></div><table align="center" width="100%" border="0" cellPadding="0" cellSpacing="0" role="presentation" style="background-color:rgb(255,255,246);max-width:600px;margin-left:auto;margin-right:auto;border-radius:12px;overflow:hidden;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), 0 10px 15px -3px rgb(0,0,0,0.1), 0 4px 6px -4px rgb(0,0,0,0.1)"><tbody><tr style="width:100%"><td><table align="center" width="100%" border="0" cellPadding="0" cellSpacing="0" role="presentation" style="padding-left:40px;padding-right:40px;padding-top:40px;padding-bottom:40px"><tbody><tr><td><img alt="BuzzTrip Logo" src="https://di867tnz6fwga.cloudfront.net/brand-kits/5c37fc6e-f7cf-42bd-9edb-2b116f9c8cd8/primary/e79aab6e-3705-411e-8375-afbf42103906.png" style="width:6rem;height:6rem;margin-left:auto;margin-right:auto;border-radius:9999px;display:block;outline:none;border:none;text-decoration:none"/><h1 style="font-size:32px;font-weight:700;color:rgb(4,19,27);margin-bottom:24px;text-align:center;line-height:1.2">Welcome to BuzzTrip! 🎉</h1><p style="font-size:18px;color:rgb(4,19,27);margin-bottom:24px;line-height:1.6;text-align:center;margin-top:16px">Hey there, map explorer! 👋</p><p style="font-size:16px;color:rgb(4,19,27);margin-bottom:24px;line-height:1.6;margin-top:16px">I&#x27;m Jacob Samorowski, the founder of BuzzTrip, and I&#x27;m absolutely thrilled to welcome you to our community of creative map makers!</p><p style="font-size:16px;color:rgb(4,19,27);margin-bottom:24px;line-height:1.6;margin-top:16px">You&#x27;ve just joined something pretty special – a platform where you can create custom maps anywhere, anytime, on any device. Whether you&#x27;re planning your next adventure, mapping out your favorite local spots, or creating something entirely unique, BuzzTrip is here to make it happen! ✨</p><p style="font-size:16px;color:rgb(4,19,27);margin-bottom:32px;line-height:1.6;margin-top:16px">Ready to dive in? Here&#x27;s what you can do right now:</p><table align="center" width="100%" border="0" cellPadding="0" cellSpacing="0" role="presentation" style="background-color:rgb(245,243,229);border-radius:12px;padding:24px;margin-bottom:32px"><tbody><tr><td><table align="center" width="100%" border="0" cellPadding="0" cellSpacing="0" role="presentation"><tbody style="width:100%"><tr style="width:100%"><td data-id="__react-email-column" style="width:40px"><p style="font-size:20px;line-height:24px;margin-bottom:16px;margin-top:16px">🗺️</p></td><td data-id="__react-email-column"><p style="font-size:16px;color:rgb(4,19,27);font-weight:600;line-height:24px;margin-bottom:16px;margin-top:16px">Create your first custom map in minutes</p></td></tr></tbody></table><table align="center" width="100%" border="0" cellPadding="0" cellSpacing="0" role="presentation"><tbody style="width:100%"><tr style="width:100%"><td data-id="__react-email-column" style="width:40px"><p style="font-size:20px;line-height:24px;margin-bottom:16px;margin-top:16px">📍</p></td><td data-id="__react-email-column"><p style="font-size:16px;color:rgb(4,19,27);font-weight:600;line-height:24px;margin-bottom:16px;margin-top:16px">Add your favorite places and memories</p></td></tr></tbody></table><table align="center" width="100%" border="0" cellPadding="0" cellSpacing="0" role="presentation"><tbody style="width:100%"><tr style="width:100%"><td data-id="__react-email-column" style="width:40px"><p style="font-size:20px;line-height:24px;margin-bottom:16px;margin-top:16px">🎨</p></td><td data-id="__react-email-column"><p style="font-size:16px;color:rgb(4,19,27);font-weight:600;line-height:24px;margin-bottom:16px;margin-top:16px">Customize colors, styles, and themes</p></td></tr></tbody></table><table align="center" width="100%" border="0" cellPadding="0" cellSpacing="0" role="presentation"><tbody style="width:100%"><tr style="width:100%"><td data-id="__react-email-column" style="width:40px"><p style="font-size:20px;line-height:24px;margin-bottom:16px;margin-top:16px">📱</p></td><td data-id="__react-email-column"><p style="color:rgb(4,19,27);font-weight:600;font-size:14px;line-height:24px;margin-bottom:16px;margin-top:16px">Access your maps from any device</p></td></tr></tbody></table></td></tr></tbody></table><table align="center" width="100%" border="0" cellPadding="0" cellSpacing="0" role="presentation" style="text-align:center;margin-bottom:32px"><tbody><tr><td><a href="https://buzztrip.co/app" class="hover:bg-[#1f5a56]" style="background-color:rgb(44,120,115);color:rgb(255,255,255);padding-left:32px;padding-right:32px;padding-top:16px;padding-bottom:16px;border-radius:8px;font-size:16px;font-weight:600;box-sizing:border-box;display:inline-block;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms;line-height:100%;text-decoration:none;max-width:100%;mso-padding-alt:0px;padding:16px 32px 16px 32px" target="_blank"><span><!--[if mso]><i style="mso-font-width:400%;mso-text-raise:24" hidden>&#8202;&#8202;&#8202;&#8202;</i><![endif]--></span><span style="max-width:100%;display:inline-block;line-height:120%;mso-padding-alt:0px;mso-text-raise:12px">Start Creating Maps Now 🚀</span><span><!--[if mso]><i style="mso-font-width:400%" hidden>&#8202;&#8202;&#8202;&#8202;&#8203;</i><![endif]--></span></a></td></tr></tbody></table><p style="font-size:16px;color:rgb(4,19,27);margin-bottom:24px;line-height:1.6;margin-top:16px">If you have any questions or just want to share what you&#x27;re building, don&#x27;t hesitate to reach out. I love hearing from our community and seeing the amazing maps you create!</p><p style="font-size:16px;color:rgb(4,19,27);margin-bottom:8px;line-height:1.6;margin-top:16px">Happy mapping! 🗺️✨</p><p style="font-size:16px;color:rgb(4,19,27);font-weight:600;line-height:24px;margin-bottom:16px;margin-top:16px">Jacob Samorowski<br/>Founder, BuzzTrip</p></td></tr></tbody></table><table align="center" width="100%" border="0" cellPadding="0" cellSpacing="0" role="presentation" style="padding-left:40px;padding-right:40px;padding-top:24px;padding-bottom:24px;border-top-width:1px;border-style:solid;border-color:rgb(245,243,229)"><tbody><tr><td><p style="font-size:14px;color:rgb(4,19,27);margin-bottom:16px;text-align:center;font-weight:600;line-height:24px;margin-top:16px">Follow us for mapping tips and updates:</p><table align="center" width="100%" border="0" cellPadding="0" cellSpacing="0" role="presentation" style="text-align:center"><tbody><tr><td><a href="https://links.buzztrip.co/twitter" style="display:inline-block;margin-left:0.25rem;margin-right:0.25rem;color:#067df7;text-decoration-line:none" target="_blank"><img alt="X (Twitter)" src="https://new.email/static/emails/social/social-x.png" style="width:2rem;height:2rem;display:block;outline:none;border:none;text-decoration:none"/></a><a href="https://links.buzztrip.co/bluesky" style="display:inline-block;margin-left:0.25rem;margin-right:0.25rem;color:#067df7;text-decoration-line:none" target="_blank"><img alt="Bluesky" src="https://new.email/static/emails/social/social-bluesky.png" style="width:2rem;height:2rem;display:block;outline:none;border:none;text-decoration:none"/></a><a href="https://links.buzztrip.co/instagram" style="display:inline-block;margin-left:0.25rem;margin-right:0.25rem;color:#067df7;text-decoration-line:none" target="_blank"><img alt="Instagram" src="https://new.email/static/emails/social/social-instagram.png" style="width:2rem;height:2rem;display:block;outline:none;border:none;text-decoration:none"/></a><a href="https://links.buzztrip.co/linkedin" style="display:inline-block;margin-left:0.25rem;margin-right:0.25rem;color:#067df7;text-decoration-line:none" target="_blank"><img alt="LinkedIn" src="https://new.email/static/emails/social/social-linkedin.png" style="width:2rem;height:2rem;display:block;outline:none;border:none;text-decoration:none"/></a><a href="https://git.new/buzztrip" style="display:inline-block;margin-left:0.25rem;margin-right:0.25rem;color:#067df7;text-decoration-line:none" target="_blank"><img alt="GitHub" src="https://new.email/static/emails/social/social-github.png" style="width:2rem;height:2rem;display:block;outline:none;border:none;text-decoration:none"/></a></td></tr></tbody></table></td></tr></tbody></table><table align="center" width="100%" border="0" cellPadding="0" cellSpacing="0" role="presentation" style="padding-left:40px;padding-right:40px;padding-top:24px;padding-bottom:24px;background-color:rgb(245,243,229);text-align:center"><tbody><tr><td><p style="font-size:12px;color:rgb(4,19,27);line-height:24px;margin-bottom:16px;margin-top:16px"><strong>BuzzTrip</strong> - Create Custom Maps - Anywhere, Anytime, On Any Device</p><p style="font-size:12px;color:rgb(4,19,27);margin:0px;line-height:24px;margin-bottom:16px;margin-top:16px">© 2025 BuzzTrip</p><p class="" style="font-size:14px;line-height:24px;margin-bottom:16px;margin-top:16px"><a href="https://buzztrip.co/legal/privacy" style="color:rgb(107,114,128);text-decoration-line:underline" target="_blank">Privacy Policy</a> • <a href="https://buzztrip.co/legal/terms" style="color:rgb(107,114,128);text-decoration-line:underline" target="_blank">Terms of Service</a></p></td></tr></tbody></table></td></tr></tbody></table><!--7--><!--/$--></body></html>`,
    });
  },
});
